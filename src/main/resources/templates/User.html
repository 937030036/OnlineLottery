<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>管理用户</title>
</head>
<style>
    .mgr {
        width: max-content;
        height: max-content;
        margin: auto;
    }

    .table {
        width: max-content;
        height: max-content;
        margin: auto;
        border: fuchsia;

    }

</style>
<body>
<div class="mgr">
    <h2 class="mgr">管理用户</h2>
    <form class="mgr" action="/index/page" method="get">
        <button style="color: darkslateblue" type="submit">返回主界面</button>
    </form>
    <br><br>
    <form name="userinfo" method="post">
        <input type="hidden" name="_method" value=""/>
        用户名：<label>
        <input id="name" type="text" name="username">
    </label>
        <br><br><br>
        电话：<label>
        <input id="phone" type="text" name="userphone">
    </label>
        <br><br><br>
        <button style="color: chocolate" type="button" onclick="adduser()">增加用户</button>
        <button style="color: skyblue" type="button" onclick="deleteuser()">删除用户</button>
        <button style="color: magenta" type="button" onclick="searchuser()">查询用户</button>
    </form>
</div>
<br><br><br>
<table border="1" class="table" style="width: 1000px;">
    <tr>
        <th>用户名</th>
        <th>手机号</th>
    </tr>
    <tr th:each="it:${data}">
        <td align="center" th:text="${it.getName()}"></td>
        <td align="center" th:text="${it.getPhone()}"></td>
    </tr>
</table>
<div class="mgr" th:text="${msg}"></div>
</body>
</html>
<script>
    function adduser() {
        if (document.getElementById("name").value === "" || document.getElementById("phone").value === "") {
            alert("信息不能为空！");
        } else {
            var re=/^1[3|4|5|7|8]\d{9}$/
            if(re.test(document.getElementById("phone").value)){
                document.userinfo.action = "/user";
                document.userinfo.submit();
            }else {
                alert("电话号格式无效");
            }

        }
    }

    function deleteuser() {
        if (document.getElementById("name").value === "" || document.getElementById("phone").value === "") {
            alert("信息不能为空！");
        } else {
            document.userinfo.action = "/user";
            document.userinfo._method.value = "delete"
            document.userinfo.submit();
        }
    }

    function searchuser() {
        if (document.getElementById("name").value === "" && document.getElementById("phone").value === "") {
            alert("信息不能为空！");
        } else {
            document.userinfo.action = "/user";
            document.userinfo.method = "get";
            document.userinfo._method.value = "get"
            document.userinfo.submit();
        }
    }
</script>